<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"> <!-- Define la codificacion de caracteres -->
  <title>Editar Tarea</title> <!-- Titulo de la pagina -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"> <!-- Enlace a Bootstrap para el estilo -->
  <style>
    body { /* Estilo para el cuerpo de la pagina */
      font-family: Arial, sans-serif; /* Define la fuente */
      padding: 2rem; /* Agrega padding al cuerpo */
      background-color: #f4f4f4; /* Color de fondo */
    }

    .btn-link { /* Estilo para el boton de enlace */
      padding: 0.5rem 1rem; /* Espaciado interno */
      border: none; /* Sin borde */
      border-radius: 4px; /* Bordes redondeados */
      background-color: #6c757d; /* Color de fondo */
      color: white; /* Color del texto */
      font-size: 1rem; /* Tama√±o de la fuente */
      cursor: pointer; /* Cambia el puntero al pasar el mouse */
      text-decoration: none; /* Quita subrayado */
      display: inline-block; /* Display en l√≠nea */
      margin-bottom: 1rem; /* Margen inferior */
    }

    .btn-link:hover { /* Estilo cuando el boton de enlace es hovered */
      background-color: #5a6268; /* Color de fondo al pasar el mouse */
    }

    .form-control { /* Estilo para los campos de formulario */
      margin-bottom: 1rem; /* Margen inferior */
    }

    /* Modo oscuro */
    .dark-mode { /* Estilos para el modo oscuro */
      background-color: #121212; /* Color de fondo oscuro */
      color: #f1f1f1; /* Color del texto blanco */
    }

    .dark-mode input,
    .dark-mode textarea,
    .dark-mode .form-control { /* Estilos para los inputs y textarea en modo oscuro */
      background-color: #2a2a2a; /* Fondo oscuro */
      color: white; /* Texto blanco */
      border: 1px solid #666; /* Borde gris */
    }

    .dark-mode .btn-primary { /* Estilo para el boton primario en modo oscuro */
      background-color: #4caf50; /* Fondo verde */
      border: none; /* Sin borde */
    }

    .dark-mode .btn-secondary { /* Estilo para el boton secundario en modo oscuro */
      background-color: #5a5a5a; /* Fondo gris oscuro */
    }

    .dark-mode .btn-link { /* Estilo para el boton de enlace en modo oscuro */
      background-color: #333; /* Fondo gris oscuro */
      color: white; /* Texto blanco */
    }

    .dark-mode .btn-link:hover { /* Estilo cuando el boton de enlace es hovered en modo oscuro */
      background-color: #555; /* Fondo gris m√°s claro */
    }
  </style>
</head>
<body>
  <div class="container py-4">

    <h2 class="mb-4">‚úèÔ∏è Editar Tarea</h2> <!-- Titulo de la pagina -->

    <!-- Boton para cambiar tema -->
    <div class="text-end mb-3">
      <button id="toggleTheme" class="btn-link">
        <span id="themeIcon">üåô</span> Cambiar tema <!-- Boton para cambiar entre temas claro y oscuro -->
      </button>
    </div>

    <!-- Formulario para editar la tarea -->
    <form action="/task/<%= task._id %>/update" method="POST">
      <input name="name" value="<%= task.name %>" class="form-control" required> <!-- Campo para el nombre de la tarea -->
      <textarea name="description" class="form-control" placeholder="Descripci√≥n adicional"><%= task.description %></textarea> <!-- Campo para la descripcion de la tarea -->
      <button class="btn btn-primary" type="submit">Guardar cambios</button> <!-- Boton para guardar los cambios -->
      <a href="/project/<%= project._id %>" class="btn btn-secondary">Cancelar</a> <!-- Enlace para cancelar y volver al proyecto -->
    </form>

  </div>

  <script>
    const toggleButton = document.getElementById('toggleTheme'); // Obtiene el boton para cambiar tema
    const themeIcon = document.getElementById('themeIcon'); // Obtiene el icono de tema
    const body = document.body; // Obtiene el cuerpo del documento

    // Funcion para actualizar el icono dependiendo del tema
    function actualizarIcono() {
      themeIcon.textContent = body.classList.contains('dark-mode') ? '‚òÄÔ∏è' : 'üåô'; // Cambia el icono entre sol y luna
    }

    // Cargar estado guardado del tema
    if (localStorage.getItem('theme') === 'dark') {
      body.classList.add('dark-mode'); // Aplica el modo oscuro si esta guardado
    }

    actualizarIcono(); // Actualiza el icono al cargar la pagina

    toggleButton.addEventListener('click', () => { // Agrega un evento de clic al boton de tema
      body.classList.toggle('dark-mode'); // Activa o desactiva el modo oscuro
      const theme = body.classList.contains('dark-mode') ? 'dark' : 'light'; // Determina el tema actual
      localStorage.setItem('theme', theme); // Guarda el tema en localStorage
      actualizarIcono(); // Actualiza el icono despues de cambiar el tema
    });
  </script>
</body>
</html>


